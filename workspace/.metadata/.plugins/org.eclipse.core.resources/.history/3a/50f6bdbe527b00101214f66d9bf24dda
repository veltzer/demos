package groovy.embed;

import groovy.lang.GroovyClassLoader;

import java.io.File;
import java.util.List;

import org.apache.bsf.BSFException;
import org.apache.bsf.BSFManager;

public class WithClassLoader {
	@SuppressWarnings("unchecked")
	public static void main(String args[]) {
		ClassLoader parent = WithClassLoader.class.getClassLoader();
		GroovyClassLoader loader = new GroovyClassLoader(parent);
		Class<?> groovyClass = loader.parseClass(new File("src/test/groovy/script/HelloWorld.groovy"));

		// let's call some method on an instance
		GroovyObject groovyObject = (GroovyObject) groovyClass.newInstance();
		Object[] args = {};
		groovyObject.invokeMethod("run", args);
	}
}
