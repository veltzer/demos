<script>
	function newalert(message) {
		// check if this is the first time we are called
		// could also be done using newalert.cnt=0 after
		// the function declaration.
		//if(!("cnt" in newalert)) {
		//	newalert.cnt=0;
		//}
		if(newalert.cnt<3) {
			alert(message);
			newalert.cnt++;
		} else {
			// this is the real magic - replace the
			// newalert function.
			var tmp=newalert;
			newalert=function(message) {
				newalert.a[newalert.a.length]=message;
			}
			// now store the message or else we would
			// miss this message. Note that we could
			// do this using "newalert(message)" too.
			newalert.a=[message];
			// other option
			// newalert.a=[];
			// newalert(message);
		}
	}
	newalert.cnt=0;
	for(var i=0;i<10;i++) {
		newalert("message "+i);
	}
	document.write("<br>This is the now installed version of alert<br>");
	document.write(newalert);
	document.write("<br>These are the messages that we missed<br>");
	document.write(newalert.a);
</script>
