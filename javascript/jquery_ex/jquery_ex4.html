<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>

<!--
-->
<html>
	<head>
		<style>
			@import "jquery_ex4.css";
		</style>
		<script type='text/javascript' src='jquery.js'></script>
		<script type='text/javascript' src='jquery_ex4.js'></script>
		<script type='text/javascript'>
			$(document).ready(function() {
				$('#mybutton').click(function() {
					tab=new PaginatedTable({
						'id':'#mytable',
						'rows':5,
						'cols':5,
						'create_buttons':0,
						'dataurl':'jquery_ex3.php',
						'httpmethod':'GET',
					});
				});
				$('#d_prev').click(function() {
					tab.prev();
				});
				$('#d_next').click(function() {
					tab.next();
				});
				$('#p_prev').click(function() {
					PostOffice.getInstance().publish('/prev',[]);
				});
				$('#p_next').click(function() {
					PostOffice.getInstance().publish('/next',[]);
				});
				$('#myrandomize').click(function() {
					for(i=0;i<tab.getRows();i++) {
						for(j=0;j<tab.getCols();j++) {
							tab.setData(i,j,Math.random());
						}
					}
				});
				// Listener to test the post office...
				function Listener() {
				}
				Listener.prototype.alert=function(data) {
					alert('Row number ['+data+'] was clicked...');
				}
				l=new Listener();
				PostOffice.getInstance().subscribe('/rowClicked',l,'alert');
			});
		</script>
	</head>
	<body>
		<button id='mybutton'>Create table</button>
		<div id='mytable'></div>
		<button id='d_prev'>Direct call to prev</button>
		<button id='d_next'>Direct call to next</button>
		<button id='p_prev'>Publish event 'prev'</button>
		<button id='p_next'>Publish event 'next'</button>
		<button id='myrandomize'>Put random data into the table</button>
	</body>
</html>
